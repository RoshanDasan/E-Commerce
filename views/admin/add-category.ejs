<section class="">
  <div class="container d-flex justify-content-center">
    <div class="row w-75 mt-5">
      <div class="col-md-12">
        <h2 class="text-center">Add Category</h2>
        <form
          action="/admin/add_category"
          method="POST"
          id="myform"
         
        >
          <label for="">Category Name</label>
          <input type="text" name="categoryname" id="category" class="form-control" onkeyup="categoryValidate()" required="" />
          <span id="category-error" class="validation-label"></span>
          <br>
          

          <label for="">Sub Category Name</label>
          <input type="text" name="subCategoryname" id="subCategory" class="form-control" onkeyup="subCategoryValidate()" required="" />
          <span id="sub-category-error" class="validation-label"></span>
          <br>


          <button type="submit" class="btn btn-info text-white mt-4">Submit</button>
        </form>
      </div>
    </div>
  </div>
</section>
<!-- Table section -->
<section w-50 mx-auto>
  <div class="card-body">
    <div class="row mt-5 mx-auto">
      <div class="table-responsive">
        <div class="table-responsive">
          <table class="table align-middle table-nowrap mb-0">
            <thead class="table-light">
              <tr>
                <th class="align-middle" scope="col">NO:</th>
                <th class="align-middle" scope="col">Category Name</th>
                <th class="align-middle" scope="col">Option</th>
              </tr>
            </thead>
            <tbody>
              <% viewCategory.forEach(function(viewCategory,index) { %>
              <tr>
                <td><%= index+1 %></td>
                <td><%= viewCategory.CategoryName %></td>

                <td>
                  <a href="/admin/edit_category/<%= viewCategory._id %>" class="btn btn-info text-white"> Edit</a>
                  <a href="/admin/delete_category/<%= viewCategory._id %>" class="btn btn-danger text-white"> Delete</a>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
      <!-- table-responsive end// -->
    </div>
  </div>
</section>





<script>
  let regex = /^[^ ].*/
  let categoryError = document.getElementById('category-error')
  let subCategoryError = document.getElementById('sub-category-error')
  let myform = document.getElementById('myform')


  function categoryValidate()
  {
    let name = document.getElementById("category").value;
    let nameInput = document.getElementById("category");
    if (name.length == 0) {
      categoryError.innerHTML = "Category is required";
      categoryError.style.color = "red";
      nameInput.style.border = "solid 2px red";
      return false;
    } if (!name.match(regex)) {
      categoryError.innerHTML = "Write valid name";
      categoryError.style.color = "red";
      nameInput.style.border = "solid 2px red";
      return false;
    }
    categoryError.innerHTML = "";
    categoryError.style.color = "green";
    nameInput.style.border = "solid 2px green";
    return true;

  }

  function subCategoryValidate()
  {
    var name = document.getElementById("subCategory").value;
    var nameInput = document.getElementById("subCategory");
    if (name.length == 0) {
      subCategoryError.innerHTML = "Sub-Category is required";
      subCategoryError.style.color = "red";
      nameInput.style.border = "solid 2px red";
      return false;
    } if (!name.match(regex)) {
      subCategoryError.innerHTML = "Write valid name";
      categoryError.style.color = "red";
      nameInput.style.border = "solid 2px red";
      return false;
    }
    subCategoryError.innerHTML = "";
    subCategoryError.style.color = "green";
    nameInput.style.border = "solid 2px green";
    return true;

  }

  myform.addEventListener('submit',(event)=>
  {
    event.preventDefault();
    if(!categoryValidate() || !subCategoryValidate())
    {
      return false;
    }
    else
    {
      myform.submit();
    }
  })
</script>



<style>

  body {
    font-family: Arial, sans-serif;
  }
  
  h1 {
    text-align: center;
  }
  
  form {
    max-width: 500px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  
  label {
    display: block;
    margin-bottom: 5px;
  }
  
  
  
  </style>
